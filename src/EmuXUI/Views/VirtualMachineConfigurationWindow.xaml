<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="EmuXUI.Views.VirtualMachineConfigurationWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:EmuXUI.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:uiStaticModels="using:EmuXUI.Models.Static"
    xmlns:uiObservableModels="using:EmuXUI.Models.Observable"
    xmlns:emuXCoreDisks="using:EmuXCore.VM.Interfaces.Components"
    mc:Ignorable="d">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid x:Name = "mainGrid" MaxHeight = "800" MaxWidth = "1000" Background = "{StaticResource Grey900}">
        <Grid.RowDefinitions>
            <RowDefinition Height = "Auto" />
            <RowDefinition Height = "*" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width = "*" />
        </Grid.ColumnDefinitions>

        <Grid x:Name = "TitleBarGrid" Grid.Row = "0" Grid.Column = "0" Background = "{StaticResource Grey950}">
            <Grid.RowDefinitions>
                <RowDefinition Height = "*" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width = "*" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Row = "0" Grid.Column = "0" Margin = "10,10,10,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height = "*" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width = "*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row = "0" Grid.Column = "0" HorizontalAlignment = "Center" FontSize = "16" Text = "EmuX" />
            </Grid>
        </Grid>

        <Grid Grid.Row = "1" Grid.Column = "0" Padding = "10,10,10,10" RowSpacing = "10" ColumnSpacing = "10">
            <Grid.RowDefinitions>
                <RowDefinition Height = "50*" />
                <RowDefinition Height = "50*" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width = "Auto" />
                <ColumnDefinition Width = "60*" />
                <ColumnDefinition Width = "40*" />
            </Grid.ColumnDefinitions>

            <Grid Grid.Row = "0" Grid.Column = "0" RowSpacing = "10" ColumnSpacing = "10">
                <Grid.RowDefinitions>
                    <RowDefinition Height = "Auto" />
                    <RowDefinition Height = "Auto" />
                    <RowDefinition Height = "Auto" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width = "*" />
                </Grid.ColumnDefinitions>

                <Frame Grid.Row = "0" Grid.Column = "0" Padding = "10,10,10,10" CornerRadius = "10" Background = "{StaticResource Grey850}">
                    <Grid Grid.Row = "0" Grid.Column = "0" ColumnSpacing = "10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height = "*" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width = "30*" />
                            <ColumnDefinition Width = "70*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" Text = "CPU" />

                        <ComboBox Grid.Row = "0" Grid.Column = "1" HorizontalAlignment = "Stretch" ItemsSource = "{x:Bind ViewModel.AvailableCPUs, Mode = OneTime}" DisplayMemberPath = "CpuModelName" SelectedItem = "{x:Bind ViewModel.VirtualMachineConfiguration.SelectedCPU, Mode = TwoWay}" />
                    </Grid>
                </Frame>

                <Frame Grid.Row = "1" Grid.Column = "0" Padding = "10,10,10,10" CornerRadius = "10" Background = "{StaticResource Grey850}">
                    <Grid ColumnSpacing = "10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height = "*" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width = "30*" />
                            <ColumnDefinition Width = "70*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" Text = "GPU" />

                        <ComboBox Grid.Row = "0" Grid.Column = "1" HorizontalAlignment = "Stretch" ItemsSource = "{x:Bind ViewModel.AvailableGPUs, Mode = OneTime}" DisplayMemberPath = "GpuModelName" SelectedItem = "{x:Bind ViewModel.VirtualMachineConfiguration.SelectedGPU, Mode = TwoWay}" />
                    </Grid>
                </Frame>

                <Frame Grid.Row = "2" Grid.Column = "0" Padding = "10,10,10,10" CornerRadius = "10" Background = "{StaticResource Grey850}">
                    <Grid Grid.Row = "2" Grid.Column = "0" RowSpacing = "10" ColumnSpacing = "10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height = "25*" />
                            <RowDefinition Height = "25*" />
                            <RowDefinition Height = "25*" />
                            <RowDefinition Height = "25*" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width = "30*" />
                            <ColumnDefinition Width = "70*" />
                            <ColumnDefinition Width = "Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Row = "0" Grid.Column = "0" Grid.ColumnSpan = "3">
                            <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Center" Text = "Memory" />
                        </StackPanel>

                        <TextBlock Grid.Row = "1" Grid.Column = "0" VerticalAlignment = "Center" Text = "IO Memory" />
                        <NumberBox Grid.Row = "1" Grid.Column = "1" Value = "{x:Bind ViewModel.VirtualMachineConfiguration.SelectedIOMemoryInKbAmount, Mode = TwoWay}" Minimum = "1" ValidationMode = "InvalidInputOverwritten" />
                        <TextBlock Grid.Row = "1" Grid.Column = "2" VerticalAlignment = "Center" Text = "Kb" />

                        <TextBlock Grid.Row = "2" Grid.Column = "0" VerticalAlignment = "Center" Text = "Video Memory" />
                        <NumberBox Grid.Row = "2" Grid.Column = "1" Value = "{x:Bind ViewModel.VirtualMachineConfiguration.SelectedVideoMemoryInKbAmount, Mode = TwoWay}" Minimum = "1" ValidationMode = "InvalidInputOverwritten" />
                        <TextBlock Grid.Row = "2" Grid.Column = "2" VerticalAlignment = "Center" Text = "Kb" />

                        <TextBlock Grid.Row = "3" Grid.Column = "0" VerticalAlignment = "Center" Text = "General Purpose Memory" />
                        <NumberBox Grid.Row = "3" Grid.Column = "1" Value = "{x:Bind ViewModel.VirtualMachineConfiguration.SelectedGeneralPurposeMemoryInKbAmount, Mode = TwoWay}" Minimum = "1" ValidationMode = "InvalidInputOverwritten" />
                        <TextBlock Grid.Row = "3" Grid.Column = "2" VerticalAlignment = "Center" Text = "Kb" />
                    </Grid>
                </Frame>
            </Grid>

            <Frame Grid.Row = "1" Grid.Column = "0">
                <StackPanel Orientation = "Vertical" VerticalAlignment = "Bottom" Spacing = "10">
                    <Button HorizontalAlignment = "Stretch" Content = "Reset to original state" Command = "{x:Bind ViewModel.CommandRestoreDefaultValue, Mode = OneTime}" />
                    <Button HorizontalAlignment = "Stretch" Content = "Save" Click = "SaveVirtualMachineConfigurationsButtonClick" />
                </StackPanel>
            </Frame>

            <Frame Grid.Row = "0" Grid.Column = "1" CornerRadius = "10" Background = "{StaticResource Grey850}">
                <Grid ColumnSpacing = "10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height = "50" />
                        <RowDefinition Height = "*" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width = "*" />
                    </Grid.ColumnDefinitions>

                    <Frame Grid.Row = "0" Grid.Column = "0" Padding = "10,10,10,10" Background = "{StaticResource Grey875}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height = "*" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width = "*" />
                                <ColumnDefinition Width = "Auto" />
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" HorizontalAlignment = "Center" Text = "Disks" />
                            <Button Grid.Row = "0" Grid.Column = "1" Content = "D" Command = "{x:Bind ViewModel.CommandDeleteDisk, Mode = OneTime}" />
                        </Grid>
                    </Frame>

                    <ListBox Grid.Row = "1" Grid.Column = "0" ItemsSource = "{x:Bind ViewModel.VirtualMachineConfiguration.Disks, Mode = OneWay}" SelectedItem = "{x:Bind ViewModel.SelectedDisk, Mode = TwoWay}" SelectionMode = "Single" Background = "{StaticResource Grey850}">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType = "ListBoxItem">
                                <Setter Property = "HorizontalContentAlignment" Value = "Stretch" />
                            </Style>
                        </ListBox.ItemContainerStyle>
                        
                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType = "uiStaticModels:DiskSelection">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height = "*" />
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width = "*" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Row = "0" Grid.Column = "0" Orientation = "Horizontal" Spacing = "5">
                                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Left" Text = "{x:Bind Caption, Mode = OneTime}" />
                                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Left" Text = "-" />
                                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Left" Text = "{x:Bind Bytes, Mode = OneTime}" />
                                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Left" Text = "bytes" />
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Frame>

            <Frame Grid.Row = "0" Grid.Column = "2" CornerRadius = "10" Background = "{StaticResource Grey850}">
                <Grid ColumnSpacing = "10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height = "50" />
                        <RowDefinition Height = "*" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width = "*" />
                    </Grid.ColumnDefinitions>

                    <Frame Grid.Row = "0" Grid.Column = "0" Padding = "10,10,10,10" Background = "{StaticResource Grey875}">
                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Center" Text = "New Disk" />
                    </Frame>

                    <Grid Grid.Row = "1" Grid.Column = "0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height = "70*" />
                            <RowDefinition Height = "30*" />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width = "*" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Row = "0" Grid.Column = "0" Padding = "10" Orientation = "Vertical" Spacing = "10">
                            <Grid ColumnSpacing = "10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height = "*" />
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width = "30*" />
                                    <ColumnDefinition Width = "70*" />
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" Text = "Platters" />
                                <NumberBox Grid.Row = "0" Grid.Column = "1" Value = "{x:Bind ViewModel.NewDisk.Platters, Mode = TwoWay}" Minimum = "1" Maximum = "8" />
                            </Grid>
                            
                            <Grid ColumnSpacing = "10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height = "*" />
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width = "30*" />
                                    <ColumnDefinition Width = "70*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" Text = "Tracks" />
                                <NumberBox Grid.Row = "0" Grid.Column = "1" Value = "{x:Bind ViewModel.NewDisk.Tracks, Mode = TwoWay}" Minimum = "1" Maximum = "32" />
                            </Grid>
                            
                            <Grid ColumnSpacing = "10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height = "*" />
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width = "30*" />
                                    <ColumnDefinition Width = "70*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" Text = "Sectors" />
                                <NumberBox Grid.Row = "0" Grid.Column = "1" Value = "{x:Bind ViewModel.NewDisk.Sectors, Mode = TwoWay}" Minimum = "1" Maximum = "128" />
                            </Grid>

                            <Grid ColumnSpacing = "10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height = "*" />
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width = "30*" />
                                    <ColumnDefinition Width = "70*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" Text = "Bytes" />
                                <NumberBox Grid.Row = "0" Grid.Column = "1" IsEnabled = "False" Value = "{x:Bind ViewModel.NewDisk.TotalBytes, Mode = OneWay}" />
                            </Grid>
                        </StackPanel>

                        <Button Grid.Row = "1" Grid.Column = "0" VerticalAlignment = "Bottom" HorizontalAlignment = "Stretch" Content = "Add" Command = "{x:Bind ViewModel.CommandAddDisk, Mode = OneTime}" />
                    </Grid>
                </Grid>
            </Frame>

            <Frame Grid.Row = "1" Grid.Column = "1" CornerRadius = "10" Background = "{StaticResource Grey850}">
                <Grid ColumnSpacing = "10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height = "50" />
                        <RowDefinition Height = "*" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width = "*" />
                    </Grid.ColumnDefinitions>

                    <Frame Grid.Row = "0" Grid.Column = "0" Padding = "10,10,10,10" Background = "{StaticResource Grey875}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height = "*" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width = "*" />
                                <ColumnDefinition Width = "Auto" />
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Row = "0" Grid.Column = "0" VerticalAlignment = "Center" HorizontalAlignment = "Center" Text = "Devices" />
                            <Button Grid.Row = "0" Grid.Column = "1" Content = "D" Command = "{x:Bind ViewModel.CommandDeleteDevice, Mode = OneTime}" />
                        </Grid>
                    </Frame>

                    <ListBox Grid.Row = "1" Grid.Column = "0" ItemsSource = "{x:Bind ViewModel.VirtualMachineConfiguration.Devices, Mode = OneWay}" SelectedItem = "{x:Bind ViewModel.SelectedDevice, Mode = TwoWay}" SelectionMode = "Single" Background = "{StaticResource Grey850}">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType = "ListBoxItem">
                                <Setter Property = "HorizontalContentAlignment" Value = "Stretch" />
                            </Style>
                        </ListBox.ItemContainerStyle>

                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType = "uiStaticModels:DeviceSelection">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height = "*" />
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width = "*" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Row = "0" Grid.Column = "0" Orientation = "Horizontal" Spacing = "5">
                                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Left" Text = "{x:Bind DeviceName, Mode = OneTime}" />
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Frame>

            <Frame Grid.Row = "1" Grid.Column = "2" CornerRadius = "10" Background = "{StaticResource Grey850}">
                <Grid ColumnSpacing = "10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height = "50" />
                        <RowDefinition Height = "*" />
                        <RowDefinition Height = "Auto" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width = "*" />
                    </Grid.ColumnDefinitions>

                    <Frame Grid.Row = "0" Grid.Column = "0" Padding = "10,10,10,10" Background = "{StaticResource Grey875}">
                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Center" Text = "New Device" />
                    </Frame>

                    <ListBox Grid.Row = "1" Grid.Column = "0" ItemsSource = "{x:Bind ViewModel.AvailableDevices, Mode = OneTime}" SelectedItem = "{x:Bind ViewModel.NewDevice, Mode = TwoWay}" SelectionMode = "Single" Background = "{StaticResource Grey850}">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType = "ListBoxItem">
                                <Setter Property = "HorizontalContentAlignment" Value = "Stretch" />
                            </Style>
                        </ListBox.ItemContainerStyle>

                        <ListBox.ItemTemplate>
                            <DataTemplate x:DataType = "uiStaticModels:DeviceSelection">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height = "*" />
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width = "*" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Row = "0" Grid.Column = "0" Orientation = "Horizontal" Spacing = "5">
                                        <TextBlock VerticalAlignment = "Center" HorizontalAlignment = "Left" Text = "{x:Bind DeviceName, Mode = OneTime}" />
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <Button Grid.Row = "2" Grid.Column = "0" VerticalAlignment = "Bottom" HorizontalAlignment = "Stretch" Content = "Add" Command = "{x:Bind ViewModel.CommandAddDevice, Mode = OneTime}" />
                </Grid>
            </Frame>
        </Grid>
    </Grid>
    
</Window>
